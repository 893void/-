# ほあんペディア 運用・編集マニュアル

作成日：2026年1月15日  
対象：開発者（コンテンツ管理者）

---

## 1. はじめに

このマニュアルでは、ほあんペディアのコンテンツを追加・編集する方法を説明します。

基本的な流れ：
```
Markdownファイルを編集 → build.py を実行 → HTMLが生成される
```

---

## 2. ファイル配置場所

### 2.1 コンテンツの配置先

| 種類 | 配置先 | 説明 |
|------|--------|------|
| 保護継電器 | `content/relay/` | OCR、GR、DGR等 |
| 機器 | `content/equipment/` | 変圧器、VCB、PAS等 |
| 単線結線図 | `content/sld/` | 単線結線図ハブページ |
| 学習ガイド | `content/guide/` | 新人向け、月次、年次 |
| 法令 | `content/standards/` | 電技、電技解釈 |

### 2.2 データファイル

| ファイル | 配置先 | 説明 |
|---------|--------|------|
| 用語辞書 | `data/terms.json` | 自動リンク用 |
| お知らせ | `data/news.json` | トップページのお知らせ |
| 更新履歴 | `data/updates.json` | 更新履歴 |
| サイト設定 | `data/site.json` | サイト全体の設定 |

---

## 3. Markdownファイルの書き方

### 3.1 フロントマター

すべてのMarkdownファイルの先頭に以下を記述：

```markdown
---
title: ページタイトル
description: ページの説明（検索結果等に表示）
category: カテゴリ名
order: 表示順（数値、小さいほど上）
template: article または index
---
```

**template の種類**

| template | 用途 |
|----------|------|
| `article` | 通常のコンテンツページ |
| `index` | 目次・一覧ページ |

### 3.2 見出しの使い方

```markdown
# 大見出し（ページタイトル）

## 中見出し（セクション）

### 小見出し（サブセクション）
```

- `#` はページに1つだけ
- `##` でセクションを区切る
- `###` は `##` の中で使う

### 3.3 テーブルの書き方

```markdown
| 項目 | 説明 |
|------|------|
| 内容1 | 説明1 |
| 内容2 | 説明2 |
```

**表示結果**

| 項目 | 説明 |
|------|------|
| 内容1 | 説明1 |
| 内容2 | 説明2 |

### 3.4 リンクの書き方

**同じフォルダ内**

```markdown
[変圧器](transformer.html)
```

**別フォルダ**

```markdown
[OCR（過電流継電器）](../relay/ocr.html)
```

**外部サイト**

```markdown
[電気設備技術基準](https://laws.e-gov.go.jp/...)
```

### 3.5 リストの書き方

**箇条書き**

```markdown
- 項目1
- 項目2
- 項目3
```

**番号付き**

```markdown
1. 手順1
2. 手順2
3. 手順3
```

---

## 4. 新しいページを追加する手順

### 4.1 手順

1. 該当フォルダに `.md` ファイルを作成
2. フロントマターを記述
3. 本文をMarkdownで記述
4. 目次ページ（`_index.md`）にリンクを追加
5. `python build.py` を実行
6. ブラウザで確認

### 4.2 例：新しい機器ページを追加

**1. ファイル作成**

`content/equipment/new-equipment.md` を作成

**2. 内容を記述**

```markdown
---
title: 新しい機器
description: 新しい機器の説明
category: 機器
order: 20
template: article
---

# 新しい機器

## 概要

ここに概要を書く。

## 基礎知識

ここに基礎知識を書く。

...
```

**3. 目次にリンクを追加**

`content/equipment/_index.md` を編集し、テーブルに行を追加：

```markdown
| [新しい機器](new-equipment.html) | 新しい機器の説明 |
```

**4. ビルド**

```bash
python build.py
```

**5. 確認**

ブラウザで `docs/equipment/new-equipment.html` を開いて確認

---

## 5. 既存ページを編集する手順

### 5.1 手順

1. 該当の `.md` ファイルを開く
2. 内容を編集
3. `python build.py` を実行
4. ブラウザで確認

### 5.2 注意事項

- **追記禁止、全置換必須**：部分的な追記ではなく、ファイル全体を正しい状態に更新する
- 編集前にバックアップを取ることを推奨

---

## 6. 自動リンク機能（terms.json）

### 6.1 仕組み

`data/terms.json` に登録された単語が、本文中で自動的にリンクに変換される。

### 6.2 terms.json の書き方

```json
{
  "terms": [
    {
      "word": "変圧器",
      "link": "equipment/transformer.html",
      "summary": "電磁誘導を利用して電圧を変換する機器"
    },
    {
      "word": "VCB",
      "link": "equipment/vcb.html",
      "summary": "真空遮断器。短絡電流を遮断する"
    }
  ]
}
```

### 6.3 ルール

- 長い単語が優先される（OVGR > GR）
- 同一ページ内では初出のみリンク化
- 不要なリンクは該当行を削除

### 6.4 新しい用語を追加する手順

1. `data/terms.json` を開く
2. `terms` 配列に新しいオブジェクトを追加
3. `python build.py` を実行

---

## 7. 目次ページ（_index.md）の管理

### 7.1 役割

各フォルダの `_index.md` は、そのフォルダのトップページ（目次）になる。

### 7.2 更新タイミング

- 新しいページを追加したとき
- ページを削除したとき
- ページの順番を変更したいとき

### 7.3 例：equipment/_index.md

```markdown
## 開閉装置

| ページ | 説明 |
|--------|------|
| [VCB（真空遮断器）](vcb.html) | 短絡電流を遮断する主遮断装置 |
| [PAS（高圧気中開閉器）](pas.html) | 責任分界点に設置、波及事故防止 |
```

---

## 8. ビルドシステム

### 8.1 基本コマンド

```bash
python build.py
```

### 8.2 出力先

生成されたHTMLは `docs/` フォルダに出力される。

```
content/equipment/transformer.md
    ↓ build.py
docs/equipment/transformer.html
```

### 8.3 トラブルシューティング

| 症状 | 原因 | 対策 |
|------|------|------|
| HTMLが生成されない | Markdownの文法エラー | Markdownを確認 |
| リンクが動作しない | パスの誤り | リンク先パスを確認 |
| スタイルが崩れる | Markdownの書き方 | テーブル等の文法を確認 |

---

## 9. コンテンツ作成のルール

### 9.1 情報の品質管理

| 原則 | 内容 |
|------|------|
| AIの出力をそのまま掲載しない | ハルシネーションリスク |
| 人間による最終確認必須 | 技術員が確認・承認 |
| 法令原文は改変禁止 | 電気設備技術基準等はそのまま掲載 |
| 解説は根拠を明示 | どの法令・規程に基づくか示す |

### 9.2 ページ構成の標準

機器ページの標準構成：

```
# 機器名

## 概要
（1〜2文で「何をする機器か」）

## 基礎知識
（動作原理、構造）

## 種類
（バリエーションがあれば）

## 月次点検のポイント
（チェックリスト、確認項目）

## 年次点検のポイント
（測定・試験項目）

## 関連法令
（電技解釈の該当条文）

## 関連ページ
（他ページへのリンク）

## 更新履歴
```

### 9.3 表記の統一

| 項目 | 統一表記 |
|------|---------|
| 変圧器 | TR または 変圧器 |
| 真空遮断器 | VCB |
| 過電流継電器 | OCR |
| 地絡継電器 | GR |
| 方向性地絡継電器 | DGR |

---

## 10. バックアップと復元

### 10.1 バックアップ対象

| フォルダ | 内容 |
|---------|------|
| `content/` | コンテンツ（Markdown） |
| `data/` | データファイル |
| `templates/` | テンプレート |
| `lib/` | ビルドモジュール |

`docs/` はビルドで再生成できるため、バックアップ不要。

### 10.2 推奨バックアップ方法

- Gitでバージョン管理
- 定期的にリポジトリをpush

---

## 11. よくある作業

### 11.1 新しい機器ページを追加

1. `content/equipment/` にMarkdownファイル作成
2. `content/equipment/_index.md` にリンク追加
3. `data/terms.json` に用語追加（任意）
4. `python build.py`
5. 確認

### 11.2 誤字を修正

1. 該当の `.md` ファイルを開く
2. 修正
3. `python build.py`
4. 確認

### 11.3 ページを削除

1. `.md` ファイルを削除
2. `_index.md` からリンクを削除
3. `terms.json` から該当用語を削除（必要なら）
4. `python build.py`
5. `docs/` の該当HTMLも削除（自動削除されない場合）

---

## 更新履歴

| 日付 | 内容 |
|------|------|
| 2026-01-15 | 初版作成 |

---

**マニュアル終了**
